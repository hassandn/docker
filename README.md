# docker
به هسته اصلی داکر میگن داکر دیمن
داکر کلاینت هم ابزاری هست که باهاش کار میکنیم
هر دستوری رو که مینویسیم اول میره به داکر کلاینت و بعد میره به داکر دیمن
دستور docker images برای ما ایمیج هامونو میاره
داکر پول دانلود میکنه
داکر لاگین لاگین میکنه
برای اینکه کانتینر ها رو بخوایم ببینیم این رو باید بنویسیم 
docker ps
این دستور کانتینر هایی رو میاره که دارن اجرا میشن
docker ps -a 
همشو نشون میده
docker run 
یک ایمیج رو اجرا میکنه
ران اگه صدا بزنیش اول میاد و میبینه که چی هست داخل لوکال اگه نبود اون رو خاموش میکنه 
برای اینکه از هلپ استفاده کنی برای انواع گزینه هایی که میتونی بنویسی میتونی بنویسی مینویسی 
doker help <thing>
داکر ایمیج اپی هست که داخل کانتینر داریم
هر بار که ران رو بزنیم میاد و کانتینر جدید درست میکنه
وقتی که میخوای اسم زندوم نزاری براش و یک اسم مشخص براش بزاری این رو باید بزاری
docker run --name <name> imagename
برای حذف کردن کانتینر ها از دستور rm استفاده میکنیک

برای اینکه کانتینر ها رو حذف کنه از دستور زیر استفاده میکنیم
docker container prume
برای حذف کردن ایمیج ها میتونیم از این استفاده کنیم
rmi
برای اینکه مثلا لینوکس رو توی داکر بالا بیاری کافیه که مثلا بیزی باکس رو دانلود کنی

موضوغ دیتچ کردن و لایف سایکل رو که داریم این هست که 
ما نیاز داریم که برنامه هامون همیشه فعال باشن مثلا ما همیشه نیاز داریم که ردیس فعال باشه برامون برای همین 
ما نیاز داریم که از دی تچ استفاده کنیم
برای اجرای ایمیج ها در پشت زمینه از دی تچ باید استفاده کنیم
برای استفاده ازش میتونیم از این دستور استفاده کنیم
docker help run
-d --detach
دی تچ مثل این میمونه که یک ترد درست کرده 
ما میتونیم ایمیج ها رو به جای اینکه بسازیم و رانشون کنیم اونها رو به سادگی فقط صدا بزنیم
با دستور استارت میتونیم اون رو در حالت اجرا قرار بدیم  میتونیم برای استارت و استاپ کردن از این دستورات استفاده کنیم
داکر دستور هایی مثل پاز و انپاز و استاپ و کیل هم داره 
image layers
برای نصب کردن پایتون در داکر در لینوکس میاد بالا
ایمیج ها لایه به لایه هستن
هر ایمیج چند لایه داره که هر کدوم از اونها باید به این صورت باشن که 
یکی سیستم عامل هست (مثلا اوبونتو) و بعدیش پکیج های لازم اون در لایه بعدی زبان برنامه نویسی و بعد سورس کد هست 
وقتی ما میایم و تغییراتی اجرا میکنیم در اصل داریم در لایه کانتینر این کار رو انجام میدیم
حالا این لایه ها توسط داکر فایل مشخص میشه
دستور Inspect دستوری مخصوص ایمیج هست که اطلاعات رو نشون میده اونجا
تگ ها چه چیزی هستند؟
تگ ها به این صورت هستند که مثلا میزنی 
docker pull python:latest
این لیتست یعنی اینکه تگش هست یعنی اخرین ورژن رو دانلود کن
این برای همون ورژن هاهست 
لیتست همیشه به معنای آخرین ورژن نیست و میتونه به عنوان ثابت ترین و عمومی ترین نسخه در نطر بگیریمش
برای اینکه آخرین نسخه رو دانلود کنی کافیه که بری آخرین نسخه رو توی داکیومنت نگاه کنی چیه و تگش رو بزنی
# حالت اینترکتیو 
فرض کن تو فقط پایتون رو صدا بزنی وقتی دستوری بهش ندی کاری انجام نمیده برای همین بادی بهش بگی که صفحه رو باز نگه دار که بتونم کد بنویسم توش
بعد از اون ما باید از -it استفاده کنیم که برای این کار هست ولی ی مشکل دیگه هست اون میاد و ریشه اصلی رو پر نگه میداره برای همین میتونیم از گزینه دیتچ استفاده کنیم 
برای اینکه بتونیم به اون رشته ای که ساخته شده دستور بدیم میتونیم از دستور exec استفاده کنیم 
برای مثال 
docker exec <container_name> statement
or
docker exec -it <container_name> bash(sh)
به ایمیج ها میگن بیلد تایم یعنی ما اومدیم ساختیمش و همینجوری مونده و وقتی میخوایم اجراش کنیم میزاریمشون توی کانتینر ها و اجراشون میکنیم 
برای ساخت یک 
ما میتونیم برای اینکه یکی کانتینر رو استارت کنیم میتونیم از sleep استفاده کنیم 
برای مثال وقتی همینطوری پایتون رو ران میکنیم و حالت اینترکتیو فعال نکنیم میدونیم که اون متوقف میشه چون دستوری برای اجرا نداره ولی میتونیم از اسلیپ استفاده کنیم و این رو طوری که میخوایم نگه داریم 
restart policy
مشخص میکنه که کانتیتر حق داره خودشو در چه موقعیت هایی ری استارت بکنه 
-always
-unless-stopped
-on-failed
توی الویز همیشه میاد و ری استارت میشه مگرانیکه خودمون بیایم و به صورت دستی اون رو استاپ کنیم 
انلس استاپ یعنی اگه بیایم و اون ری استارت کنیم اون فرقی نخواهد کرد و ری استارت نخواهد شد
یعنی اگه خودت استاپش کردی دیگه ما نمیایم اون رو صدا بزنیم حتی اگه داکر ری استارت شد نب
ان فیلد یعنی وقتی به ارور خوردیم اون رو صدا بزن
inspect برای نشان دادن اطلاعات هست 


docker file
تبدیل برنامه ها به ایمیج
به این کار میگن داکرایز
برای داکرایز کردن ما نیاز به داکر فایل داریم 
docker reference برای دیدن گزینه هایی که میتونیم بیاریم برای داکرفایل 
برای اینکه بگیم ایمیج کجا بالا بیاد باید از from استفاده کنیم
برای اجرای دستور از دستور ران استفاده میکنیم 
اینوارونویت ساختن از env استفاده میکنیم 
دستور cmd میگه اگه اگه یک نفر اومد و ایمیج رو انتخال کرد چه اتفاقی میوفته 
ست ام دی یک بار فقط میشه استفاده کرد
وقتی داکر فایل رو ساختیم باید یک ایمیج برای اون درست کنیم
بعد از نوشتن کد و نوشتن داکر فایل مینویسیم 
docker image build .
برای اینکه برای Image اسم و تگ بدیم باید از دستورات 
docker image -t name:tag build .
برای مثال:
docker image -t app:tag  build
وقتی مینویسی داکر ایمیجس این ها رو ست میکنه 
